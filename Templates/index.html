<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>ZOF Solver — Web GUI</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 24px; max-width:900px; }
    label { display:block; margin-top:10px; }
    input[type=text], select { width:100%; padding:8px; box-sizing:border-box; }
    .row { display:flex; gap:12px; }
    .col { flex:1; }
    table { width:100%; border-collapse:collapse; margin-top:12px; }
    th, td { border:1px solid #ddd; padding:8px; text-align:center; }
    th { background:#f2f2f2; }
    .error { color: darkred; }
  </style>
</head>
<body>
  <h1>ZOF Solver — Web GUI</h1>

  {% if error %}
    <p class="error">Error: {{ error }}</p>
  {% endif %}

  <form method="post">
    <label>Function f(x) — use Python-style <code>**</code> for power (e.g. x**3 - x - 2)</label>
    <input type="text" name="func" required placeholder="x**3 - x - 2"/>

    <label>Method</label>
    <select name="method">
      <option value="1">Bisection</option>
      <option value="2">Regula Falsi (False Position)</option>
      <option value="3">Secant</option>
      <option value="4">Newton-Raphson</option>
      <option value="5">Fixed Point Iteration (requires g(x))</option>
      <option value="6">Modified Secant</option>
    </select>

    <div class="row" style="margin-top:8px;">
      <div class="col">
        <label>Left endpoint a (for methods 1 & 2)</label>
        <input type="text" name="a" placeholder="e.g., 1.0"/>
      </div>
      <div class="col">
        <label>Right endpoint b (for methods 1 & 2)</label>
        <input type="text" name="b" placeholder="e.g., 2.0"/>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <label>Initial guess x0 (for methods 3,4,5,6)</label>
        <input type="text" name="x0" placeholder="e.g., 1.5"/>
      </div>
      <div class="col">
        <label>Second guess x1 (for Secant)</label>
        <input type="text" name="x1" placeholder="e.g., 2.0"/>
      </div>
      <div class="col">
        <label>Delta (for Modified Secant)</label>
        <input type="text" name="delta" placeholder="e.g., 1e-3"/>
      </div>
    </div>

    <label>g(x) for Fixed Point (only used if you select method 5)</label>
    <input type="text" name="g_func" placeholder="g(x) = ... e.g., (x+2/x**2)**(1/3)"/>

    <div class="row">
      <div class="col"><label>Max iterations</label><input type="text" name="max_iter" value="50"/></div>
      <div class="col"><label>Tolerance</label><input type="text" name="tol" value="1e-6"/></div>
    </div>

    <button type="submit" style="margin-top:12px;padding:8px 12px;">Compute</button>
  </form>

  {% if result %}
    <h2>Result</h2>
    <p>Estimated root: <strong>{{ result.root }}</strong></p>
    <p>Final error / |f(root)|: <strong>{{ result.final_err }}</strong></p>
    <p>Iterations used: <strong>{{ result.iters }}</strong></p>

    <h3>Iterations</h3>
    <table>
      <thead>
        <tr>
        {% for h in headers %}
          <th>{{ h }}</th>
        {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
        <tr>
          {% for c in r %}
            <td>{{ "%.10g"|format(c) if c is number else c }}</td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}

  <p style="margin-top:20px;font-size:0.9em;color:#666;">Tip: For Fixed Point Iteration enter a valid g(x) such that x = g(x).</p>
</body>
</html>
